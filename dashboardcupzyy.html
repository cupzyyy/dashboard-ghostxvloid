<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>iOS Style Admin Dashboard</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    *{margin:0;padding:0;box-sizing:border-box;font-family:-apple-system,BlinkMacSystemFont,"SF Pro Display","Segoe UI",sans-serif;}
    body{background:linear-gradient(160deg,#ffffff,#e6e6e6);min-height:100vh;display:flex;flex-direction:column;color:#333;}

    .hidden{display:none;}
    .center{display:flex;justify-content:center;align-items:center;height:100vh;}

    /* Card iOS style */
    .card{background:rgba(255,255,255,0.8);backdrop-filter:blur(20px);padding:25px;border-radius:20px;box-shadow:0 8px 20px rgba(0,0,0,.15);width:100%;max-width:400px;text-align:center;}
    .card h2{margin-bottom:15px;font-weight:600;}
    .card input, .card select{width:100%;padding:14px;margin:10px 0;border:1px solid #ddd;border-radius:12px;font-size:15px;outline:none;}
    .card button{width:100%;padding:14px;border:none;border-radius:12px;background:linear-gradient(135deg,#888,#bbb);color:#fff;font-weight:600;font-size:15px;cursor:pointer;margin-top:12px;transition:.3s;}
    .card button:hover{opacity:.85;}

    /* Content */
    .content{flex:1;padding:80px 20px 80px;overflow-y:auto;}
    .content h2{margin-bottom:15px;font-weight:600;}

    .stats{display:flex;gap:20px;flex-wrap:wrap;}
    .stat-card{flex:1;min-width:160px;background:rgba(255,255,255,0.9);backdrop-filter:blur(10px);padding:20px;border-radius:20px;box-shadow:0 4px 10px rgba(0,0,0,.1);text-align:center;}
    .stat-card h4{color:#666;margin-bottom:8px;font-weight:500;}
    .stat-card p{font-size:1.4em;font-weight:700;}

    /* User list */
    .list{margin-top:20px;}
    .user-item{background:#f8f8f8;padding:14px;border-radius:15px;margin-bottom:12px;display:flex;justify-content:space-between;align-items:center;}
    .user-item span{font-weight:600;}
    .btn{padding:6px 14px;border:none;border-radius:10px;cursor:pointer;margin-left:6px;font-size:13px;}
    .delete-btn{background:#ff3b30;color:#fff;}
    .edit-btn{background:#007aff;color:#fff;}

    /* Top Bar */
    .top-bar{position:fixed;top:0;left:0;right:0;background:linear-gradient(90deg,#999,#bbb);color:#fff;padding:15px;text-align:center;font-weight:600;font-size:18px;z-index:10;box-shadow:0 2px 10px rgba(0,0,0,.1);border-bottom-left-radius:20px;border-bottom-right-radius:20px;}

    /* Bottom Nav */
    .bottom-nav{position:fixed;bottom:0;left:0;right:0;background:rgba(255,255,255,0.9);backdrop-filter:blur(15px);display:flex;justify-content:space-around;padding:12px 0;border-top:1px solid #ddd;}
    .bottom-nav button{background:none;border:none;color:#333;font-size:14px;font-weight:500;cursor:pointer;display:flex;flex-direction:column;align-items:center;transition:.3s;}
    .bottom-nav button.active{color:#007aff;font-weight:600;}
  </style>
</head>
<body>

  <!-- Login -->
  <div class="center" id="loginPage">
    <div class="card">
      <h2>üîë Admin Login</h2>
      <input type="text" id="adminUser" placeholder="Username">
      <input type="password" id="adminPass" placeholder="Password">
      <button onclick="login()">Login</button>
    </div>
  </div>

  <!-- Dashboard -->
  <div class="hidden" id="dashboardPage">
    <div class="top-bar">‚öôÔ∏è Admin Dashboard</div>
    <div class="content">
      
      <!-- Home -->
      <div id="homePage">
        <h2>Overview</h2>
        <div class="stats">
          <div class="stat-card"><h4>Total User</h4><p id="totalUser">0</p></div>
          <div class="stat-card"><h4>Total Admin</h4><p id="totalAdmin">0</p></div>
          <div class="stat-card"><h4>Online</h4><p id="onlineUser">0</p></div>
        </div>
        <canvas id="userChart" style="margin-top:30px;"></canvas>
      </div>

      <!-- Create Account -->
      <div id="createPage" class="hidden">
        <h2>Create Account</h2>
        <input type="text" id="newUser" placeholder="Username">
        <input type="password" id="newPass" placeholder="Password">
        <select id="roleUser">
          <option value="user">User</option>
          <option value="admin">Admin</option>
        </select>
        <select id="statusUser">
          <option value="offline">Offline</option>
          <option value="online">Online</option>
        </select>
        <button onclick="createAccount()">Create</button>
      </div>

      <!-- Users -->
      <div id="usersPage" class="hidden">
        <h2>All Accounts</h2>
        <div class="list" id="userList"></div>
      </div>

      <!-- Profile -->
      <div id="profilePage" class="hidden">
        <h2>Admin Profile</h2>
        <div class="card" style="max-width:500px;margin:auto;">
          <h3>üë§ Super Admin</h3>
          <p><b>Username:</b> admin</p>
          <p><b>Email:</b> admin@dashboard.com</p>
          <p><b>Role:</b> Super Admin</p>
        </div>
      </div>
    </div>

    <!-- Bottom Navigation -->
    <div class="bottom-nav">
      <button onclick="showPage('home')" id="btnHome" class="active">üè† Home</button>
      <button onclick="showPage('create')" id="btnCreate">‚ûï Create</button>
      <button onclick="showPage('users')" id="btnUsers">üë• Users</button>
      <button onclick="showPage('profile')" id="btnProfile">üë§ Profile</button>
      <button onclick="logout()">üö™ Logout</button>
    </div>
  </div>

<script>
  const DEFAULT_ADMIN={user:"admin",pass:"12345",role:"admin",online:true};
  if(!localStorage.getItem("accounts")){
    localStorage.setItem("accounts",JSON.stringify([DEFAULT_ADMIN]));
  }

  function login(){
    let u=document.getElementById("adminUser").value;
    let p=document.getElementById("adminPass").value;
    let accounts=JSON.parse(localStorage.getItem("accounts"))||[];
    let found=accounts.find(acc=>acc.user===u&&acc.pass===p&&acc.role==="admin");
    if(found){
      document.getElementById("loginPage").style.display="none";
      document.getElementById("dashboardPage").style.display="block";
      updateStats();renderChart();
    }else{alert("Login gagal! Hanya admin bisa masuk.");}
  }

  function logout(){
    document.getElementById("dashboardPage").style.display="none";
    document.getElementById("loginPage").style.display="flex";
  }

  function showPage(page){
    ["homePage","createPage","usersPage","profilePage"].forEach(id=>document.getElementById(id).style.display="none");
    ["btnHome","btnCreate","btnUsers","btnProfile"].forEach(id=>document.getElementById(id).classList.remove("active"));
    if(page==="home"){document.getElementById("homePage").style.display="block";document.getElementById("btnHome").classList.add("active");}
    if(page==="create"){document.getElementById("createPage").style.display="block";document.getElementById("btnCreate").classList.add("active");}
    if(page==="users"){document.getElementById("usersPage").style.display="block";document.getElementById("btnUsers").classList.add("active");loadAccounts();}
    if(page==="profile"){document.getElementById("profilePage").style.display="block";document.getElementById("btnProfile").classList.add("active");}
  }

  function createAccount(){
    let u=document.getElementById("newUser").value;
    let p=document.getElementById("newPass").value;
    let r=document.getElementById("roleUser").value;
    let s=document.getElementById("statusUser").value;
    if(!u||!p){alert("Isi semua field!");return;}
    let accounts=JSON.parse(localStorage.getItem("accounts"))||[];
    accounts.push({user:u,pass:p,role:r,online:(s==="online")});
    localStorage.setItem("accounts",JSON.stringify(accounts));
    document.getElementById("newUser").value="";
    document.getElementById("newPass").value="";
    updateStats();alert("Akun berhasil dibuat!");
  }

  function loadAccounts(){
    let accounts=JSON.parse(localStorage.getItem("accounts"))||[];
    let list=document.getElementById("userList");
    list.innerHTML="";
    accounts.forEach((acc,idx)=>{
      let div=document.createElement("div");
      div.className="user-item";
      div.innerHTML=`<span>${acc.user} (${acc.role}) - ${acc.online?"Online":"Offline"}</span>
      <div>
        <button class="btn edit-btn" onclick="editAccount(${idx})">Edit</button>
        <button class="btn delete-btn" onclick="deleteAccount(${idx})">Hapus</button>
      </div>`;
      list.appendChild(div);
    });
  }

  function deleteAccount(index){
    let accounts=JSON.parse(localStorage.getItem("accounts"))||[];
    if(accounts[index].user==="admin"){alert("Tidak bisa hapus super admin!");return;}
    accounts.splice(index,1);
    localStorage.setItem("accounts",JSON.stringify(accounts));
    loadAccounts();updateStats();
  }

  function editAccount(index){
    let accounts=JSON.parse(localStorage.getItem("accounts"))||[];
    let newUser=prompt("Update Username:",accounts[index].user);
    let newPass=prompt("Update Password:",accounts[index].pass);
    let newRole=prompt("Role (admin/user):",accounts[index].role);
    let newStatus=confirm("Set Online? (OK=Online, Cancel=Offline)");
    if(newUser&&newPass){
      accounts[index]={user:newUser,pass:newPass,role:newRole,online:newStatus};
      localStorage.setItem("accounts",JSON.stringify(accounts));
      loadAccounts();updateStats();
    }
  }

  function updateStats(){
    let accounts=JSON.parse(localStorage.getItem("accounts"))||[];
    document.getElementById("totalUser").innerText=accounts.filter(a=>a.role==="user").length;
    document.getElementById("totalAdmin").innerText=accounts.filter(a=>a.role==="admin").length;
    document.getElementById("onlineUser").innerText=accounts.filter(a=>a.online).length;
    renderChart();
  }

  let chartInstance;
  function renderChart(){
    let ctx=document.getElementById("userChart").getContext("2d");
    let accounts=JSON.parse(localStorage.getItem("accounts"))||[];
    let admins=accounts.filter(a=>a.role==="admin").length;
    let users=accounts.filter(a=>a.role==="user").length;
    if(chartInstance) chartInstance.destroy();
    chartInstance=new Chart(ctx,{type:"doughnut",data:{labels:["Admin","User"],datasets:[{data:[admins,users],backgroundColor:["#007aff","#ccc"]}]}})
  }
</script>
</body>
</html>
